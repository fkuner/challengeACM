# aoj 2170 Marked Ancestor
>题目链接：http://judge.u-aizu.ac.jp/onlinejudge/description.jsp?id=2170

## 题意
给你一个由N个节点组成的的树T，每个节点标号从1到N并且节点1总是树T的根节点。现在对于树T有两个操作：

**（1）M v：标记节点v**

**（2）Q v：打印节点v最近的标记祖先的索引，该祖先是最近的。**

现在你需要编写一个程序，在给定的树上执行这些操作的序列，并计算每个Q操作将打印的值。为避免输出文件过大，要求程序打印所有查询操作的输出总和。注意，按照给定的顺序计算查询操作的每个输出。

**输入：**

输入有多种样例，每种样例有以下数据

第一行由两个整数N和Q，分别代表树T节点的数量和对树操作的数量，1<=N<=10^5，1<=Q<=10^5

接下来的N-1行描述了树的构成，每一行包含一个整数pi (i = 2，…， N)，表示第i个节点的父节点的索引。

接下来的Q行按顺序包含操作。每个操作都格式化为“M v”或“Q v”，其中v是节点的索引。

最后一个样例以0和0结束，

**输出：**

在一行中打印所有查询操作的输出总和

**样例输入：**

```
6 3
1
1
2
3
3
Q 5
M 3
Q 5
0 0
```
**样例输出：**

```
4
```
## 问题分析